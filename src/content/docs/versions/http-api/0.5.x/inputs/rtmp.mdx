---
title: RTMP server
slug: http-api/0.5.x/http-api/inputs/rtmp
---

import { Aside, Badge } from '@astrojs/starlight/components';
import CollapsibleDetails from '@components/CollapsibleDetails.astro';

<Badge text="Experimental" variant="caution" size="large" />

<br />

<br />

An input type that allows Smelter to receive streams over RTMP. Each input starts a separate RTMP server.

<Aside type="caution" title="Experimental">
  This is an experimental version. The current implementation is just a wrapper around FFmpeg, and as a result,
  it is limited in functionality.

  * If you have an url in format `rtmp://example.com/myapp/mykey`, then there is no way to validate based on `mykey`. FFmpeg
    detects that path does not match and logs it, but still allows you to establish the connection.
  * There is no way to setup an RTMPS server (RTMP over TLS/SSL).

  You can still use it safely in production, but you need to set up an RTMP proxy that will handle route validation and encryption.
  You can use nginx with `nginx-rtmp-module` for that.
</Aside>

## Usage

To use RTMP server input you must register it first. You can do it by sending a request like this:

<CollapsibleDetails summaryTitle="Example request" open>
  ```http
  POST: /api/input/:input_id/register
  Content-Type: application/json

  {
    "type": "rtmp_server",
    "url": "rtmp://127.0.0.1:1935"
  }
  ```
</CollapsibleDetails>

See [HTTP Routes](/http-api/0.5.x/routes#inputs-configuration) documentation to learn more about managing inputs.

Once the RTMP server input is registered and Smelter is listening on the configured URL, you can push a stream to it using any RTMP-compatible broadcaster (f.e. OBS, FFmpeg).

## Reference

<CollapsibleDetails summaryTitle="Type definition" open>
  ```tsx
  type RtmpServerInput = {
    type: "rtmp_server";
    url: string;
    required?: bool;
    offset_ms?: f64;
    decoder_map?: DecoderMap;
  }
  ```
</CollapsibleDetails>

Parameters for registering an RTMP server input.

## Properties

### url

URL where the RTMP server will listen for incoming stream.\
Format: `rtmp://<ip_address>:<port>`

* **Type**: `string`

***

### required

Determines if the input stream is essential for output frame production. If set to true and the stream is delayed, Smelter will postpone output frames until the stream is received.

* **Type**: `bool`
* **Default value**: `false`

***

### offset\_ms

Offset in milliseconds relative to the pipeline start (start request). If unspecified, the stream synchronizes based on the delivery time of the initial frames.

* **Type**: `f64`

***

### decoder\_map

Assigns which decoder should be used for media encoded with a specific codec.

* **Type**: [`DecoderMap`](#decodermap)

## DecoderMap

Maps codecs to the provided decoders.

<CollapsibleDetails summaryTitle="Type definitions" open>
  ```tsx
  type DecoderMap = {
    h264?: 'ffmpeg_h264' | 'vulkan_h264';
  };
  ```
</CollapsibleDetails>

### Properties

#### h264

H264 decoder configuration.

* **Type**: `'ffmpeg_h264' | 'vulkan_h264'`
* **Default value**: If available `vulkan_h264` will be used, otherwise `ffmpeg_h264`
* **Supported values**:
  * `"ffmpeg_h264"` - Software H264 decoder based on FFmpeg.
  * `"vulkan_h264"` (<Badge text="Required feature: vk-video" variant="note" />) - Hardware decoder. Requires GPU that supports Vulkan Video decoding.
