---
title: Shader
---
import CollapsibleDetails from '../../../../components/CollapsibleDetails.astro';
import { Code } from '@astrojs/starlight/components';

`Shader` applies transformation defined via WGSL shader on its children. [Learn more.](/fundamentals/concepts/shaders)

:::note
To use this component, you need to first register the shader with matching `shader_id` using [`register shader`](/http-api/routes#register-shader) request.
:::

{/*TODO*/}
## Reference

Register Input using following request:
```http
POST: /api/input/example_input/register
Content-Type: application/json

{
    "type": "rtp_stream",
    "port": 8002,
    "video": {
        "decoder": "ffmpeg_h264"
    }
}
```

Register Shader using following request:
```http
POST: /api/shader/example_shader/register
Content-Type: application/json

{
    "source": your_binary_shader_file,
}
```

Register Output using following request:
```http
POST: /api/output/example_output/register
Content-Type: application/json

{
    "type": "rtp_stream",
    "port": 8004,
    "ip": "127.0.0.1",
    "video": {
        "resolution": {
            "width": 1920,
            "height": 1080,
        },
        "encoder": {
            "type": "ffmpeg_h264",
            "preset": "ultrafast"
        },
        "initial": {
            "root": {
                "type": "shader",
                "id": "shader_node_1",
                "shader_id": "example_shader",
                "children": [
                    {
                        "id": "input_1",
                        "type": "input_stream",
                        "input_id": "example_input",
                    }
                ],
                "resolution": { "width": 1920, "height": 1080 },
            }
        }
    }
}
```



<CollapsibleDetails summaryTitle='Type definitions'>
<Code code={`
type Shader = {
    id?: string;
    children?: Component[];
    shader_id: string;
    shader_param?: ShaderParam;
    resolution: {
      width: u32;
      height: u32;
    };
}
`} lang='tsx' />
</CollapsibleDetails>


#### Properties
- `id` - Id of a component.
- `children` - List of component's children.
- `shader_id` - Id of a shader. It identifies a shader registered using a [`register shader`](/http-api/routes#register-shader) request.
- `shader_param` - Object that will be serialized into a `struct` and passed inside the shader as:
  
  ```wgsl
  @group(1) @binding(0) var<uniform>
  ```
  :::note
  This object's structure must match the structure defined in a shader source code.
  Currently, we do not handle memory layout automatically. To achieve the correct memory
  alignment, you might need to pad your data with additional fields. See
  [WGSL documentation](https://www.w3.org/TR/WGSL/#alignment-and-size) for more details.
  :::
- `resolution` - Resolution of a texture where shader will be executed.
## ShaderParam
```typescript
type ShaderParam = 
  | { type: "f32"; value: f32; }
  | { type: "u32"; value: u32; }
  | { type: "i32"; value: i32; }
  | { type: "list"; value: ShaderParam[]; }
  | {
      type: "struct";
      value: ShaderParamStructField[];
    }
```
## ShaderParamStructField
```typescript
type ShaderParamStructField = 
  | { field_name: string; type: "f32"; value: f32; }
  | { field_name: string; type: "u32"; value: u32; }
  | { field_name: string; type: "i32"; value: i32; }
  | {
      field_name: string;
      type: "list";
      value: ShaderParam[];
    }
  | {
      field_name: string;
      type: "struct";
      value: ShaderParamStructField[];
    }
```
